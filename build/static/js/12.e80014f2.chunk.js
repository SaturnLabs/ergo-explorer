(this["webpackJsonpblockchain-explorer"]=this["webpackJsonpblockchain-explorer"]||[]).push([[12],{604:function(t,e,a){},607:function(t,e,a){},608:function(t,e,a){},609:function(t,e,a){},610:function(t,e,a){},668:function(t,e,a){"use strict";a.r(e),a.d(e,"ChartComponent",(function(){return X}));var i,c=a(9),n=a(10),r=a(17),s=a(14),o=a(13),l=a(38),p=a.n(l),h=a(57),b=a.n(h),u=a(0),d=a.n(u),j=a(65),m=a.n(j),f=a(16),O=a(26),v=a(32),x=a(24);!function(t){t.DAYS_30="30days",t.DAYS_60="60days",t.DAYS_180="180days",t.YEAR_1="1year",t.YEAR_2="2years",t.ALLTIME="alltime"}(i||(i={}));var y=a(75),_=a(33),g=a.n(_),k=a(19),C=function(){function t(){Object(c.a)(this,t)}return Object(n.a)(t,null,[{key:"getChart",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=e.timespan===i.ALLTIME?"all":e.timespan;return g.a.get("".concat(k.a.apiUrl,"/charts/").concat(t),{params:{timespan:a||i.DAYS_30}}).then((function(e){return e?e.data:Promise.reject("Block api service. Request: ".concat(k.a.apiUrl,"/charts/").concat(t,"."))}))}}]),t}(),A={getChart:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(a){return a({type:y.a}),C.getChart(t,e).then((function(t){a({payload:{data:t},type:y.b})}))}}},N=a(3),F=a(223),S=a.n(F),T=a(377),D=a(85),L=a(66),M=(a(604),a(2)),U=function(t){Object(s.a)(a,t);var e=Object(o.a)(a);function a(){return Object(c.a)(this,a),e.apply(this,arguments)}return Object(n.a)(a,[{key:"render",value:function(){var t=S()(this.props.label).format("DD.MM.YYYY"),e=null,a=this.props.payload?this.props.payload[0]:null;if(a){var i=a.payload.type||"chart",c=this.props.isScale?a.payload.originalValue:this.props.payload[0].value;e=Object(D.a)(i,c)}return Object(M.jsxs)("div",{className:"bi-chart-tooltip",children:[Object(M.jsx)("div",{className:"bi-chart-tooltip__label",children:t}),e]})}}]),a}(d.a.PureComponent),Y=1e-4,R=function(t){Object(s.a)(a,t);var e=Object(o.a)(a);function a(t){var i;return Object(c.a)(this,a),(i=e.call(this,t)).formatLabel=i.formatLabel.bind(Object(r.a)(i)),i.formatXLabel=i.formatXLabel.bind(Object(r.a)(i)),i.formatTooltip=i.formatTooltip.bind(Object(r.a)(i)),i.renderTooltip=i.renderTooltip.bind(Object(r.a)(i)),i}return Object(n.a)(a,[{key:"render",value:function(){var t=this.props.data,e=Math.ceil(Math.max.apply(null,t.map((function(t){return t.value})))),a=(Math.ceil(e/Math.pow(10,e.toString().length-1))+2)*Math.pow(10,e.toString().length-1);return this.props.isScale&&(t=t.map((function(t){return Object(N.a)(Object(N.a)({},t),{},{originalValue:t.value,value:t.value<=0?Y:t.value})}))),Object(M.jsx)(T.g,{width:"100%",height:"100%",children:Object(M.jsxs)(T.b,{data:t,children:[Object(M.jsx)("defs",{children:Object(M.jsxs)("linearGradient",{id:"colorUv",x1:"0",y1:"1",x2:"1",y2:"0",children:[Object(M.jsx)("stop",{offset:"20%",stopColor:"#0078FF",stopOpacity:0}),Object(M.jsx)("stop",{offset:"80%",stopColor:"#0078FF",stopOpacity:.2})]})}),this.props.compact?null:Object(M.jsx)(T.c,{stroke:"#e8e8e8",vertical:!1,strokeDasharray:"6 4",fill:"#fff"}),Object(M.jsx)(T.j,{dataKey:"timestamp",tick:{fill:"#828795",fontSize:14},tickLine:!1,tickCount:100,tickMargin:10,tickFormatter:this.formatXLabel,minTickGap:30,hide:this.props.compact}),Object(M.jsx)(T.k,{dataKey:"value",domain:[this.props.isScale?Y:0,a],scale:this.props.isScale?"log":"auto",tickMargin:10,tickLine:!1,tickCount:5,minTickGap:30,tick:{fill:"#828795",fontSize:14},tickFormatter:this.formatLabel,hide:this.props.compact}),Object(M.jsx)(T.i,{content:this.renderTooltip}),Object(M.jsx)(T.a,{type:"linear",dataKey:"value",stroke:"#0078FF",yAxisId:0,fillOpacity:1,fill:"url(#colorUv)",animationDuration:300,isAnimationActive:!this.props.compact})]})})}},{key:"renderTooltip",value:function(t){return Object(M.jsx)(U,Object(N.a)(Object(N.a)({},t),{},{isScale:this.props.isScale}))}},{key:"formatLabel",value:function(t){return Object(L.a)(t,{fractionDigits:0})}},{key:"formatXLabel",value:function(t){return S()(t).format("DD MMM YYYY")}},{key:"formatTooltip",value:function(t){return Object(D.a)("chart",t)}}]),a}(d.a.PureComponent),w=a(41),P=a(605),E=a.n(P),B=(a(607),function(t){Object(s.a)(a,t);var e=Object(o.a)(a);function a(){return Object(c.a)(this,a),e.apply(this,arguments)}return Object(n.a)(a,[{key:"render",value:function(){return Object(M.jsxs)("div",{className:"bi-chart-actions",children:[this.props.isScale?Object(M.jsx)(v.Link,{className:"bi-chart-actions__action bi-btn bi-btn--flat",to:this.props.getChartActionUrl("scale",null),children:Object(M.jsx)(f.a,{id:"components.chart-actions.linear-scale"})}):Object(M.jsx)(v.Link,{className:"bi-chart-actions__action bi-btn bi-btn--flat",to:this.props.getChartActionUrl("scale","1"),children:Object(M.jsx)(f.a,{id:"components.chart-actions.logarithmic-scale"})}),this.props.data&&Object(M.jsx)(E.a,{file:"data.csv",content:this.getCSVData(),className:"bi-chart-actions__action bi-btn bi-btn--flat",children:Object(M.jsx)(f.a,{id:"components.chart-actions.csv"})}),this.props.data&&Object(M.jsx)(E.a,{file:"data.json",content:JSON.stringify(this.props.data),className:"bi-chart-actions__action bi-btn bi-btn--flat",children:Object(M.jsx)(f.a,{id:"components.chart-actions.json"})})]})}},{key:"getCSVData",value:function(){if(!this.props.data)return"";var t=this.props.data.map((function(t){return[t.timestamp,t.value].join(", ")}));return["timestamp, value"].concat(Object(w.a)(t)).join("\r\n")}}]),a}(d.a.Component)),I=(a(608),["#0088FE","#85144b","#FFBB28","#FF8042","#2ECC40","#FF4136","#001f3f","#0074D9","#FF851B","#00C49F","#F012BE","#7FDBFF","#FFDC00","#39CCCC","#3D9970","#B10DC9","#01FF70"]),J=function(t){Object(s.a)(a,t);var e=Object(o.a)(a);function a(){var t;Object(c.a)(this,a);for(var i=arguments.length,n=new Array(i),r=0;r<i;r++)n[r]=arguments[r];return(t=e.call.apply(e,[this].concat(n))).state={activeIndex:0},t.renderActiveShape=function(t){var e=Math.PI/180,a=t.cx,i=t.cy,c=t.midAngle,n=t.innerRadius,r=t.outerRadius,s=t.startAngle,o=t.endAngle,l=t.fill,p=t.payload,h=t.percent,b=t.value,u=Math.sin(-e*c),d=Math.cos(-e*c),j=a+(r+10)*d,m=i+(r+10)*u,f=a+(r+30)*d,O=i+(r+30)*u,v=f+22*(d>=0?1:-1),x=O,y=d>=0?"start":"end";return Object(M.jsxs)("g",{children:[Object(M.jsx)("text",{x:a,y:i,dy:8,textAnchor:"middle",fill:l,children:p.name}),Object(M.jsx)(T.h,{cx:a,cy:i,innerRadius:n,outerRadius:r,startAngle:s,endAngle:o,fill:l}),Object(M.jsx)(T.h,{cx:a,cy:i,startAngle:s,endAngle:o,innerRadius:r+6,outerRadius:r+10,fill:l}),Object(M.jsx)("path",{d:"M".concat(j,",").concat(m,"L").concat(f,",").concat(O,"L").concat(v,",").concat(x),stroke:l,fill:"none"}),Object(M.jsx)("circle",{cx:v,cy:x,r:2,fill:l,stroke:"none"}),Object(M.jsx)("text",{x:v+12*(d>=0?1:-1),y:x,textAnchor:y,fill:"#333",children:"Blocks: ".concat(b)}),Object(M.jsx)("text",{x:v+12*(d>=0?1:-1),y:x,dy:18,textAnchor:y,fill:"#999",children:"(Rate: ".concat((100*h).toFixed(2),"%)")})]})},t.onPieEnter=function(e,a){t.setState({activeIndex:a})},t}return Object(n.a)(a,[{key:"render",value:function(){var t=this,e=this.props.data.map((function(t){return{name:t.name,value:t.value}})).sort((function(t,e){return e.y-t.y}));return Object(M.jsxs)("div",{className:"bi-pie-chart",children:[Object(M.jsx)("div",{className:"bi-pie-chart__chart",children:Object(M.jsx)(T.g,{children:Object(M.jsx)(T.f,{children:Object(M.jsx)(T.e,{activeIndex:this.state.activeIndex,activeShape:this.renderActiveShape,data:e,innerRadius:100,outerRadius:140,fill:"#8884d8",dataKey:"value",onMouseEnter:this.onPieEnter,children:e.map((function(t,e){return Object(M.jsx)(T.d,{fill:I[e%I.length]},"cell-".concat(t.value))}))})})})}),Object(M.jsxs)("div",{className:"bi-pie-chart__legend bi-pie-chart__table bi-table",children:[Object(M.jsxs)("div",{className:"bi-pie-chart__row bi-table__row bi-pie-chart__row--header",children:[Object(M.jsx)("div",{className:"bi-pie-chart__cell bi-table__cell",children:this.props.labels.name}),Object(M.jsx)("div",{className:"bi-pie-chart__cell bi-table__cell",children:this.props.labels.value})]}),this.props.data.map((function(e,a){return Object(M.jsxs)("div",{className:"bi-pie-chart__row bi-table__row",children:[Object(M.jsxs)("div",{className:"bi-pie-chart__cell bi-table__cell",children:[Object(M.jsx)("span",{children:t.props.labels.name})," ",e.name]}),Object(M.jsxs)("div",{className:"bi-pie-chart__cell bi-table__cell",children:[Object(M.jsx)("span",{children:t.props.labels.value})," ",e.value]})]},a)}))]})]})}}]),a}(d.a.PureComponent),z=(a(609),function(t){Object(s.a)(a,t);var e=Object(o.a)(a);function a(t){return Object(c.a)(this,a),e.call(this,t)}return Object(n.a)(a,[{key:"render",value:function(){var t=this;return Object(M.jsx)("div",{className:"bi-timespan",children:Object.keys(i).map((function(e){var a=p()({"bi-btn":!0,"bi-btn--flat":!0,"bi-timespan__span":!0,"bi-timespan__span--active":t.props.selected===i[e]});return Object(M.jsx)(v.Link,{className:a,to:t.props.getTimespanUrl(i[e]),children:Object(M.jsx)(f.a,{id:"components.timespan.span.".concat(i[e])})},e)}))})}}]),a}(d.a.Component)),K=a(15),V=(a(610),function(t){Object(s.a)(a,t);var e=Object(o.a)(a);function a(t){var i;return Object(c.a)(this,a),(i=e.call(this,t)).params={},i.getTimespanUrl=i.getTimespanUrl.bind(Object(r.a)(i)),i.getChartActionUrl=i.getChartActionUrl.bind(Object(r.a)(i)),i}return Object(n.a)(a,[{key:"componentDidMount",value:function(){this.params=this.getParams(),this.props.getChart(this.props.match.params.chartType,this.params)}},{key:"UNSAFE_componentWillReceiveProps",value:function(t){var e=this.getParams();JSON.stringify(e)!==JSON.stringify(this.params)&&(this.params=e,this.props.getChart(this.props.match.params.chartType,this.params))}},{key:"render",value:function(){var t=b.a.parse(this.props.location.search),e=t.iframe,a=t.scale,i=p()({"bi-chart":!0,"bi-chart--iframe":e,"bi-chart--scale":"1"===a,"g-flex-column":!0,"g-flex-column__item-fixed":!0});return Object(M.jsxs)("div",{className:i,children:[Object(M.jsx)(f.a,{id:"common.pages.chart.title.".concat(this.props.match.params.chartType),children:function(t){return Object(M.jsx)(m.a,{children:Object(M.jsx)("title",{children:t})})}}),Object(M.jsxs)("div",{className:"bi-chart__header g-flex-column__item-fixed",children:[Object(M.jsx)("div",{className:"bi-chart__line",children:Object(M.jsxs)(v.Link,{className:"bi-chart__btn-back",to:"/charts",children:[Object(M.jsx)(K.c,{className:"bi-chart__btn-back-icon"}),Object(M.jsx)("span",{className:"bi-chart__btn-back-title",children:Object(M.jsx)(f.a,{id:"components.chart.back"})})]})}),Object(M.jsx)("div",{className:"bi-chart__title",children:Object(M.jsx)(f.a,{id:"components.chart.title.".concat(this.props.match.params.chartType)})}),Object(M.jsx)("div",{className:"bi-chart__subtitle",children:Object(M.jsx)(f.a,{id:"components.chart.subtitle.".concat(this.props.match.params.chartType)})})]}),this.renderBody()]})}},{key:"renderBody",value:function(){return Object(M.jsxs)("div",{className:"bi-chart__body g-flex-column__item",children:[Object(M.jsx)("div",{className:"bi-chart__chart",children:this.props.data&&this.renderChart()}),this.renderControls()]})}},{key:"renderChart",value:function(){var t=b.a.parse(this.props.location.search).iframe;return"hash-rate-distribution"===this.props.match.params.chartType?Object(M.jsx)(J,{data:this.formatData(),compact:!!t,labels:{name:Object(M.jsx)(f.a,{id:"components.chart.hash-rate-distribution.labels.name"}),value:Object(M.jsx)(f.a,{id:"components.chart.hash-rate-distribution.labels.value"})}}):Object(M.jsx)(R,{data:this.formatData(),compact:!!t,isScale:this.params.scale})}},{key:"renderControls",value:function(){return"hash-rate-distribution"===this.props.match.params.chartType?null:Object(M.jsxs)("div",{className:"bi-chart__controls g-flex",children:[Object(M.jsx)(z,{selected:this.params.timespan,getTimespanUrl:this.getTimespanUrl}),Object(M.jsx)(B,{isScale:this.params.scale,data:this.props.data,getChartActionUrl:this.getChartActionUrl})]})}},{key:"formatData",value:function(){switch(this.props.match.params.chartType){case"miners-revenue":case"total":return this.props.data.map((function(t){return{timestamp:t.timestamp,type:"coin",value:t.value/1e9}}));case"blockchain-size":case"block-size":return this.props.data.map((function(t){return{timestamp:t.timestamp,type:"bytes",value:t.value}}));case"hash-rate":return this.props.data.slice(0,this.props.data.length-1).map((function(t){return{timestamp:t.timestamp,type:"hashRateDay",value:t.value}}));default:return this.props.data}}},{key:"getParams",value:function(){var t=b.a.parse(this.props.history.location.search),e=Object.keys(i).find((function(e){return i[e]===t.timespan}));return{scale:"1"===t.scale,timespan:e?i[e]:i.DAYS_30}}},{key:"getTimespanUrl",value:function(t){var e=b.a.parse(this.props.history.location.search);return e.timespan=t,"".concat(this.props.location.pathname,"?").concat(b.a.stringify(e))}},{key:"getChartActionUrl",value:function(t,e){var a=b.a.parse(this.props.history.location.search);return a[t]=e,null===e&&delete a[t],"".concat(this.props.location.pathname,"?").concat(b.a.stringify(a))}}]),a}(d.a.PureComponent));var X=Object(O.b)((function(t){return t.chart}),(function(t){return Object(x.bindActionCreators)(A,t)}))(V);e.default=X}}]);
//# sourceMappingURL=12.e80014f2.chunk.js.map